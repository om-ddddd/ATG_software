<!--
 // Do not edit this file, this file is automatically generated from index.gui.
 -->
<!doctype html>
<html>

<head>
    <meta http-equiv="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">
    <meta http-equiv="Cross-Origin-Embedder-Policy" content="require-corp">
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta name="keywords" content="GUI Composer, GC, Gallery">
    <meta name="description"
        content="This application is powered by GUI Composer, visit https://dev.ti.com/gc for more detail.">
    <meta name="root-win">
    <link rel="icon" href="assets/app.ico">
    <title>main</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="stylesheet" type="text/css" href="components/@ti/assets/stylesheets/gc-core-stylesheet.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="tide-management.css">
    <script src="https://www.ti.com/assets/js/headerfooter/analytics.js" type="text/javascript"></script>
    <script> if (typeof nw != 'undefined') { window.$ti_nw_main_window = true; } </script>
</head>

<body>
    <div id="progressDiv"
        style='width:100%; height:100%; z-index: 999999; background-color: #f7f7f7; position: absolute;'>
        <div
            style="width: 100%; height: 100%; background: url('components/@ti/assets/images/progress.svg') no-repeat center">
        </div>
    </div>

    <!--gist-begin-->
    <script type="module" src="./components/@ti/build/gc-components.esm.js"></script>
    <script type="module" src="./app-variables.js"></script>
    <script type="module" src="./pm-variables.js"></script>
    <script type="module" src="./index.js"></script>
    <script type="module" src="./script.js"></script>
    <script type="module" src="./oscilloscope.js"></script>
    <script type="module" src="./start_from_0.js"></script>
    <script type="module" src="./admin-auth.js"></script>
    <script type="module" src="./tide-management.js"></script>
    <script type="module" src="./auth.js"></script>
    <script src="./node_modules/html2canvas/dist/html2canvas.min.js"></script>
    <script type="module" src="./export-functions.js"></script>

    <div id="editorRoot" layout vertical one flex>
        <gc-widget-theme id="theme" selected-theme-index="0" hidden></gc-widget-theme>
        <gc-widget-about-dialog id="about_dialog"></gc-widget-about-dialog>
        <gc-widget-cloudagent-dialog id="cloudagent_dialog"></gc-widget-cloudagent-dialog>

        <!-- Add target communication configuration below this line -->
        <gc-target-connection-manager id="connection_manager" auto-connect active-configuration="xds+pm">
            <gc-transport-xds id="xds" device-name="TMS320F280049C"
                connection-name="Texas Instruments XDS110 USB Debug Probe"></gc-transport-xds>
            <gc-model-program id="pm" program-or-bin-path="./firmware/atg_main.out"></gc-model-program>
        </gc-target-connection-manager>

        <header>
            <gc-widget-menubar id="mb" has-window-buttons product-name="ATG" layout horizontal>
                <gc-widget-menuitem id="mm_administration" label="Administration" layout vertical>
                </gc-widget-menuitem>
                <gc-widget-menuitem id="mm_help" label="Help" layout vertical>
                    <gc-widget-menuaction id="ma_about" label="About" action-id="cmd_open_about_dialog"
                        icon="round:action:help"></gc-widget-menuaction>
                    <gc-widget-menuaction id="ma_widget_readme" label="View README.md" action-id="cmd_open_readme"
                        icon="round:action:description"></gc-widget-menuaction>
                </gc-widget-menuitem>
                <gc-widget-menuitem id="mm_exit" label="Exit" layout vertical>
                    <gc-widget-menuaction id="ma_exit" label="Exit" action-id="cmd_exit" hotkey="ctrl+x"
                        icon="round:action:exit_to_app"></gc-widget-menuaction>
                </gc-widget-menuitem>
            </gc-widget-menubar>
        </header>
        <div>
            <img class="svg" id="home_svg" src="./home_svg.svg" alt="Tide Manipulation">
            <img class="svg" id="settings_svg" src="./settings_svg.svg" alt="Tide Manipulation">
            <img class="svg" id="tide_svg" src="./tide_manipulation.svg" alt="Tide Manipulation">
            <img class="svg" id="run_svg" src="./run_svg.svg" alt="Tide Manipulation">
            <img class="svg" id="main_svg" src="./main.svg" alt="Tide Manipulation">
        </div>


        <img id="main_img" src="/home/hp/guicomposer/runtime/gcruntime.v13/main/atgimg.jpg" alt="">
        <gc-widget-container id="viewport" flex one vertical layout>
            <gc-widget-tab-container id="main_tab_container" class="container" layout horizontal position="left"
                index="2" initial-index="0" no-labels>
                <gc-widget-tab-panel id="page_home" class="container" label="Home" icon-name="round:action:sdgt"
                    tooltip="Application home" center-justified layout vertical>
                    <gc-widget-container id="page_home_product_container" layout center class="container" vertical one
                        flex>
                        <gc-widget-image id="image" file-path="./atgimg.jpg"></gc-widget-image>
                        <gc-widget-label id="page_home_product_name"
                            label="AUTOMATIC TIDE GENERATION"></gc-widget-label>
                    </gc-widget-container>
                </gc-widget-tab-panel>

                <gc-widget-tab-panel id="page_settings" class="container" label="Settings" icon-name="routnd:aifrjsi"
                    vertical layout has-heading tooltip="Calibration and settings">
                    <gc-widget-container id="scontainer_4">
                        <gc-widget-label id="label_10" label="Hardware Settings"></gc-widget-label>
                        <gc-widget-container id="scontainer_5">
                            <gc-widget-label id="label_5" label="Offset"></gc-widget-label>
                            <gc-widget-input id="input_3"></gc-widget-input>
                        </gc-widget-container>
                        <gc-widget-container id="scontainer_6">
                            <gc-widget-label id="label_6" label="Fine Offset"></gc-widget-label>
                            <gc-widget-input id="input_4"></gc-widget-input>
                        </gc-widget-container>
                        <gc-widget-label id="label_3" label="Calibration Factor"></gc-widget-label>
                        <gc-widget-slider id="slider" step="0.1" labels="0,10,20,30,40,50,60,70,80,90,100"
                            max-value="100"></gc-widget-slider>
                        <gc-widget-label id="label_11"
                            label="---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"></gc-widget-label>
                        <gc-widget-label id="label_12" label="Software Settings"></gc-widget-label>
                        <gc-widget-label id="label_50" label="Sample Rate"></gc-widget-label>
                        <gc-widget-input id="input_40"></gc-widget-input>
                        <gc-widget-label id="label_40" label="Angular Frequency"></gc-widget-label>
                        <gc-widget-input id="input_50"></gc-widget-input>
                    </gc-widget-container>
                </gc-widget-tab-panel>
                <gc-widget-tab-panel id="tide_manipulation" class="container" label="Tide Manipulation"
                    icon-name="round:act" vertical layout has-heading tooltip="Calibration and settings">
                    <div class="tide-manipulation-container">
                        <h2>Tide Management</h2>
                        <div class="button-container">
                            <button id="create-tide-btn" class="tide-btn">Create New Tide</button>
                            <button id="modify-tide-btn" class="tide-btn">Modify Tide</button>
                            <button id="delete-tide-btn" class="tide-btn">Delete Tide</button>
                        </div>

                        <div class="tide-table-container">
                            <h3>Available Tides</h3>
                            <table id="tide-list" class="tide-table">
                                <!-- Tide data will be dynamically inserted here -->
                            </table>
                        </div>
                    </div>

                    <!-- Create Tide Dialog -->
                    <div id="create-tide-dialog" class="modal">
                        <div class="modal-content">
                            <span class="close close-dialog">&times;</span>
                            <h3>Create New Tide</h3>
                            <form id="create-tide-form">
                                <div class="form-group">
                                    <label for="tide-name">Tide Name:</label>
                                    <input type="text" id="tide-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="tide-range-input">Range:</label>
                                    <input type="number" id="tide-range-input" required step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="tide-offset">Offset:</label>
                                    <input type="number" id="tide-offset" required step="0.1">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="submit-btn">Create</button>
                                    <button type="button" class="cancel-btn close-dialog">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Modify Tide Dialog -->
                    <div id="modify-tide-dialog" class="modal">
                        <div class="modal-content">
                            <span class="close close-dialog">&times;</span>
                            <h3>Modify Tide</h3>
                            <form id="modify-tide-form">
                                <div class="form-group">
                                    <label for="tide-select">Select Tide:</label>
                                    <select id="tide-select" required>
                                        <option value="">Select a tide</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="modify-range">Range:</label>
                                    <input type="number" id="modify-range" required step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="modify-offset">Offset:</label>
                                    <input type="number" id="modify-offset" required step="0.1">
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="submit-btn">Update</button>
                                    <button type="button" class="cancel-btn close-dialog">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Delete Tide Dialog -->
                    <div id="delete-tide-dialog" class="modal">
                        <div class="modal-content">
                            <span class="close close-dialog">&times;</span>
                            <h3>Delete Tide</h3>
                            <form id="delete-tide-form">
                                <div class="form-group">
                                    <label for="delete-tide-select">Select Tide to Delete:</label>
                                    <select id="delete-tide-select" required>
                                        <option value="">Select a tide</option>
                                    </select>
                                </div>
                                <div class="warning-message">
                                    Warning: This action cannot be undone.
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="submit-btn delete-confirm-btn">Delete</button>
                                    <button type="button" class="cancel-btn close-dialog">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </gc-widget-tab-panel>
                <gc-widget-tab-panel id="run" class="container" label="Run" icon-name="round:image:" vertical layout
                    has-heading start-justified start>
                    <gc-widget-container id="page_data_top_container" horizontal layout center-justified>
                    </gc-widget-container>
                    <gc-widget-container id="container">
                        <gc-widget-label id="label_tide" label="Tide"></gc-widget-label>
                        <gc-widget-container id="container_7">
                            <select name="Tide Range" id="tide-range">
                                <option value="">--Choose--</option>
                                <!-- Tide options will be populated dynamically from tide.json -->
                            </select>
                        </gc-widget-container>
                        <gc-widget-container id="container_9">
                            <input type="number" id="no._of_waves" name="tentacles" min="0"
                                style=" width: 133px;height: 23px;">
                        </gc-widget-container>
                        <gc-widget-label id="label_tides_per_screen" label="No. of Tides Per Screen"></gc-widget-label>
                        <gc-widget-label id="manual_check" label="Enter Range and Offset Manually"></gc-widget-label>
                        <input type="checkbox" name="checkbox" id="m_check"
                            style="width: 20px; position: absolute; left: 74px; top: 69px; height: 16px;" />
                        <gc-widget-container id="container_90">
                            <gc-widget-input id="input_5" placeholder="Enter Manually"></gc-widget-input>
                            <gc-widget-label id="label_9" label="Offset"></gc-widget-label>
                            <gc-widget-input id="input_6"></gc-widget-input>
                            <gc-widget-label id="label_4" label="Tide Range"></gc-widget-label>
                        </gc-widget-container>
                    </gc-widget-container>
                    <gc-widget-button id="accept_button" button-type="primary" label="ACCEPT"></gc-widget-button>
                </gc-widget-tab-panel>
                <gc-widget-tab-panel id="main_tab" class="container" label="" icon-name="round:actione" vertical layout
                    has-heading>
                    <gc-widget-virtual-oscilloscope id="oscilloscope" capacity="100" sample-rate="7.09"
                        trigger-level="-4" plot-title=" " x-axis-title="Time" horizontal-pos="0" horizontal-zoom="1"
                        trigger-timeout="0.1">
                        <gc-widget-container id="container_6">
                            <gc-widget-container id="container_3" horizontal layout center-justified end>
                                <gc-widget-label id="label_2" label="Gate Status"></gc-widget-label>
                                <gc-widget-led id="led"></gc-widget-led>
                            </gc-widget-container>

                            <gc-widget-container id="container_4">
                                <gc-widget-label id="label_7" label="Green - Feedback "></gc-widget-label>
                                <gc-widget-label id="label_8" label="Orange - Input"></gc-widget-label>
                            </gc-widget-container>
                        </gc-widget-container>
                        <gc-widget-virtual-oscilloscope-input id="input_1" legend-name=" "
                            vertical-units-per-division="13" vertical-pos="-4"
                            vertical-scale="1"></gc-widget-virtual-oscilloscope-input>
                        <gc-widget-virtual-oscilloscope-input id="input" legend-name=" "
                            vertical-units-per-division="13" vertical-pos="-4"
                            vertical-scale="1"></gc-widget-virtual-oscilloscope-input>
                        <div class="PB-range-slider-div"
                            style="position: absolute; left: 1507px; top: 359px; z-index: 11111; width: 176px; height: 35px;">
                            <input type="range" min="0" max="5" value="1" class="PB-range-slider" step="0.1"
                                id="h_scale">
                            <p class="PB-range-slidervalue">H. Scale</p>
                        </div>
                        <div class="PB-range-slider-div"
                            style="position: absolute; left: 1507px; top: 438px; width: 176px; z-index: 1111; height: 35px;">
                            <input type="range" min="0" max="100" value="1" class="PB-range-slider" step="0.01"
                                id="h_position">
                            <p class="PB-range-slidervalue">H. Position</p>
                        </div>
                        <div class="PB-range-slider-div"
                            style="position: absolute; left: 1507px; top: 515px; z-index: 11111; width: 176px; height: 35px;">
                            <input type="range" min="-4" max="4" value="1" class="PB-range-slider" step="0.1"
                                id="v_scale">
                            <p class="PB-range-slidervalue">V. Scale</p>
                        </div>
                        <div class="PB-range-slider-div"
                            style="position: absolute; left: 1507px; top: 594px; width: 176px; z-index: 1111; height: 35px;">
                            <input type="range" min="-4" max="4" value="1" class="PB-range-slider" step="0.1"
                                id="v_position">
                            <p class="PB-range-slidervalue">V. Position</p>
                        </div>
                    </gc-widget-virtual-oscilloscope>
                    <gc-widget-container id="container_5">
                        <gc-widget-container id="container_1">
                            <div id="actual_wl_span">Actual WL: <span id="actual_wl_value"
                                    style="position: fixed;left: 127px;">00.00</span></div>
                            <div id="required_wl_span">Requi. WL: <span id="required_wl_value"
                                    style="position: fixed;left: 127px;">00.00</span></div>
                        </gc-widget-container>
                        <gc-widget-container id="container_2">
                            <gc-widget-button id="button" label="H"></gc-widget-button>
                            <gc-widget-button id="button_1" label="R"></gc-widget-button>
                        </gc-widget-container>
                        
                        <!-- Export Options Container -->
                        
                    </gc-widget-container>
                    <gc-widget-container id="export_options_container">
                            <div class="export-controls">
                                <button id="print_btn" class="export-btn">Print</button>
                                <button id="save_btn" class="export-btn">Save</button>
                                <div class="export-checkbox">
                                    <input type="checkbox" id="autosave_checkbox">
                                    <label for="autosave_checkbox">Auto Save</label>
                                </div>
                            </div>
                        </gc-widget-container>
                </gc-widget-tab-panel>
            </gc-widget-tab-container>
        </gc-widget-container>

        <footer>
            <gc-widget-statusbar id="statusbar" show-connections show-branding-image show-progress-bar
                show-progress-string>
                <gc-widget-statusitem-connections slot="left"></gc-widget-statusitem-connections>
            </gc-widget-statusbar>
        </footer>
    </div>
    <gc-widget-firmware-update-dialog id="firmwareUpdate"></gc-widget-firmware-update-dialog>

    <!-- Login Dialog -->
    <div id="loginDialog" class="modal" style="display:block;">
        <div class="modal-content">
            <form id="loginForm">
                <h3>Administrator Credentials Required</h3>
                <div class="form-group">
                    <label for="loginUsername">Username:</label>
                    <input type="text" id="loginUsername" name="loginUsername" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" name="loginPassword" required
                        autocomplete="current-password">
                </div>
                <div class="error-message" id="loginError" style="display: none;"></div>
                <div class="button-group">
                    <button type="button" id="loginButton">Enter</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Administration Button -->


    <!-- Change User Dialog -->
    <div id="changeUserDialog" class="auth-modal" style="display:none;">
        <div class="auth-modal-content">
            <span class="auth-close" id="closeChangeUserDialog">&times;</span>
            <form id="changeUserForm">
                <h3>Change User Name/Password</h3>
                <div class="auth-radio-group">
                    <label><input type="radio" name="userType" value="admin" checked> Administrator</label>
                    <label><input type="radio" name="userType" value="user"> User</label>
                </div>
                <div class="auth-form-group">
                    <label for="newUserName">New User Name:</label>
                    <input type="text" id="newUserName" name="newUserName">
                </div>
                <div class="auth-form-group">
                    <label for="currentPassword">Current Password:</label>
                    <input type="password" id="currentPassword" name="currentPassword">
                </div>
                <div class="auth-form-group">
                    <label for="newPassword">New Password:<br><span class="auth-hint">(Min. 3 Characters)</span></label>
                    <input type="password" id="newPassword" name="newPassword">
                </div>
                <div class="auth-form-group">
                    <label for="retypePassword">Re-Type Password:</label>
                    <input type="password" id="retypePassword" name="retypePassword">
                </div>
                <div class="auth-button-group">
                    <button type="button" id="okChangeUser">Ok</button>
                    <button type="button" id="cancelChangeUser">Cancel</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        const checkbox = document.getElementById('m_check');
        const elem = document.getElementById('container_90')
        checkbox.addEventListener('change', function () {
            if (checkbox.checked) {
                elem.style.opacity = 1;
                console.log('Checkbox is checked ✅');
                // Trigger your custom logic here
            } else {
                 elem.style.opacity = 0;
                console.log('Checkbox is unchecked ❌');
                // Handle uncheck if needed
            }
        });
    </script>

    <script type="module">
        addEventListener('DOMContentLoaded', () => {
            var progressDiv = document.querySelector('#progressDiv')
            if (progressDiv) {
                setTimeout(() => progressDiv.parentNode.removeChild(progressDiv), 1000);
            }
        });

        // Show the Change User dialog when Administration menu is clicked
        addEventListener('DOMContentLoaded', () => {
            const adminMenu = document.getElementById('mm_administration');
            const dialog = document.getElementById('changeUserDialog');
            const closeBtn = document.getElementById('closeChangeUserDialog');
            const cancelBtn = document.getElementById('cancelChangeUser');
            if (adminMenu && dialog) {
                adminMenu.addEventListener('click', () => {
                    dialog.style.display = 'block';
                });
            }
            if (closeBtn) {
                closeBtn.onclick = () => dialog.style.display = 'none';
            }
            if (cancelBtn) {
                cancelBtn.onclick = () => dialog.style.display = 'none';
            }
            // Hide dialog when clicking outside
            window.onclick = function (event) {
                if (event.target === dialog) {
                    dialog.style.display = 'none';
                }
            };
        });
    </script>
</body>

</html>